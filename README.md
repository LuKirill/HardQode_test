# Тестовое задание от HardQode.

Построение системы для обучения.
Суть задания заключается в проверке знаний построения связей в БД и умение правильно строить запросы без ошибок N+1.

## 1. Построение архитектуры(3 балла)
1. В этом задании у нас есть три бизнес-задачи на хранение:
Создать сущность продукта. У продукта должен быть владелец. Необходимо добавить сущность для сохранения доступов к продукту для пользователя.
2. Создать сущность урока. Урок может находиться в нескольких продуктах одновременно. В уроке должна быть базовая информация: название, ссылка на видео, длительность просмотра (в секундах).
3. Урок могут просматривать множество пользователей. Необходимо для каждого фиксировать время просмотра и фиксировать статус “Просмотрено”/”Не просмотрено”. Статус “Просмотрено” проставляется, если пользователь просмотрел 80% ролика.

## 2. Написание запросов(7 баллов)
В этом пункте потребуется использовать выполненную вами в прошлом задании архитектуру:
1. Реализовать API для выведения списка всех уроков по всем продуктам к которым пользователь имеет доступ, с выведением информации о статусе и времени просмотра.
2. Реализовать API с выведением списка уроков по конкретному продукту к которому пользователь имеет доступ, с выведением информации о статусе и времени просмотра, а также датой последнего просмотра ролика.
3. Реализовать API для отображения статистики по продуктам. Необходимо отобразить список всех продуктов на платформе, к каждому продукту приложить информацию:
    a. Количество просмотренных уроков от всех учеников.
    b. Сколько в сумме все ученики потратили времени на просмотр роликов.
    c. Количество учеников занимающихся на продукте.
    d. Процент приобретения продукта (рассчитывается исходя из количества полученных доступов к продукту деленное на общее количество пользователей на платформе).

Результат выполнения:
Выполненная архитектура на базе данных SQLite с использованием Django.
Реализованные API на базе готовой архитектуры.

Мы ожидаем: 
Ссылка на публичный репозиторий в GitHub с выполненным проектом.


## Содержание
- [Установка](#установка)
- [Использование](#использование)

### Установка
1. Скачайте Python 3.7 или выше с сайта https://www.python.org/downloads/, затем установите его командой в терминале:
2. Проверьте дейстующую версию python:
```sh
py --version  
```
3. Установите виртуальное окружение в папке проекта. Нужно зайти в корень проекта и выполнить команду в терминале:
```sh
py -m venv env
```
4. Для активации виртуального окружения выполните команду:
```sh
env/Scripts/activate.bat
```
Слева от имени диретории в терминале должно появиться (env)

Для выхода из виртуального окружения введите команду:
```sh
env/Scripts/deactivate.bat  
```
5. Установите Django в вашем виртуальном окружении:
```sh
py -m pip install Django 
```
6. Установите зависимости, используя менеджер пакетов pip и файл requirements.txt. Для этого выполните команду:
```sh
py -m pip install -r requirements.txt
```

### Использование
Запуск скрипта производится из корневой директории проекта test_task_training_system командой:
```sh
python manage.py runserver  
```
После этого веб-сервис должен быть запущен на локальном сервере и доступен по адресу http://127.0.0.1:8000/.
